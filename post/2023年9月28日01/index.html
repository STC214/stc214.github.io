<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://stc214.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://stc214.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://stc214.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://stc214.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://stc214.github.io/css/light.css' />
    <link rel="stylesheet" href='https://stc214.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://stc214.github.io/css/syntax.css' />
    <title>docker版Miao-Yunzai - NOTE</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="参考链接： 喵云崽库
https://gitee.com/yoimiya-kokomi/Miao-Yunzai
https://github.com/yoimiya-kokomi/Miao-Yunzai
参考文章
https://muerg.cn/post/yunzai_docker/
https://zhu-yirui.gitee.io/zyr_blog/2023/06/16/docker%E8%BF%90%E8%A1%8C%E4%BA%91%E5%B4%BD/
安装依赖 wrt安装以下几个工具
git-http
docker-compose
node-npm
指令 # 使用 Github git clone --depth=1 https://github.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://github.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用Gitee git clone --depth=1 https://gitee.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://gitee.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用npmjs.org安装 npm install pnpm -g # 指定国内源npmmirror.com安装 npm --registry=https://registry.npmmirror.com install pnpm -g # 直接安装 pnpm install -P # 如依赖安装缓慢或失败，可尝试更换国内npm源后再执行install命令 pnpm config set registry https://registry.npmmirror.com pnpm install -P 运维指令 启动容器 在工作目录内运行命令，拉起容器，并运行初始化命令。" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://stc214.github.io/post/2023%E5%B9%B49%E6%9C%8828%E6%97%A501/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="docker版Miao-Yunzai - NOTE" />
<meta name="twitter:description"
  content="参考链接： 喵云崽库
https://gitee.com/yoimiya-kokomi/Miao-Yunzai
https://github.com/yoimiya-kokomi/Miao-Yunzai
参考文章
https://muerg.cn/post/yunzai_docker/
https://zhu-yirui.gitee.io/zyr_blog/2023/06/16/docker%E8%BF%90%E8%A1%8C%E4%BA%91%E5%B4%BD/
安装依赖 wrt安装以下几个工具
git-http
docker-compose
node-npm
指令 # 使用 Github git clone --depth=1 https://github.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://github.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用Gitee git clone --depth=1 https://gitee.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://gitee.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用npmjs.org安装 npm install pnpm -g # 指定国内源npmmirror.com安装 npm --registry=https://registry.npmmirror.com install pnpm -g # 直接安装 pnpm install -P # 如依赖安装缓慢或失败，可尝试更换国内npm源后再执行install命令 pnpm config set registry https://registry.npmmirror.com pnpm install -P 运维指令 启动容器 在工作目录内运行命令，拉起容器，并运行初始化命令。" />
<meta name="twitter:site" content="https://stc214.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://stc214.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="docker版Miao-Yunzai - NOTE">
<meta property="og:description"
  content="参考链接： 喵云崽库
https://gitee.com/yoimiya-kokomi/Miao-Yunzai
https://github.com/yoimiya-kokomi/Miao-Yunzai
参考文章
https://muerg.cn/post/yunzai_docker/
https://zhu-yirui.gitee.io/zyr_blog/2023/06/16/docker%E8%BF%90%E8%A1%8C%E4%BA%91%E5%B4%BD/
安装依赖 wrt安装以下几个工具
git-http
docker-compose
node-npm
指令 # 使用 Github git clone --depth=1 https://github.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://github.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用Gitee git clone --depth=1 https://gitee.com/yoimiya-kokomi/Miao-Yunzai.git cd Miao-Yunzai git clone --depth=1 https://gitee.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/ # 使用npmjs.org安装 npm install pnpm -g # 指定国内源npmmirror.com安装 npm --registry=https://registry.npmmirror.com install pnpm -g # 直接安装 pnpm install -P # 如依赖安装缓慢或失败，可尝试更换国内npm源后再执行install命令 pnpm config set registry https://registry.npmmirror.com pnpm install -P 运维指令 启动容器 在工作目录内运行命令，拉起容器，并运行初始化命令。" />
<meta property="og:url" content="https://stc214.github.io/post/2023%E5%B9%B49%E6%9C%8828%E6%97%A501/" />
<meta property="og:site_name" content="docker版Miao-Yunzai" />
<meta property="og:image"
  content="https://stc214.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2023-09-28 12:02:44 &#43;0800 CST" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://stc214.github.io/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://stc214.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://stc214.github.io/">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://stc214.github.io/">
                  <img class=" avatar-user"
                    src="https://stc214.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://stc214.github.io/">STC214</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://stc214.github.io/post/2023%E5%B9%B49%E6%9C%8828%E6%97%A501/">docker版Miao-Yunzai</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Thu, 28 Sep 2023 12:02:44 &#43;0800"
                    class="no-wrap">
                    Thu, 28 Sep 2023 12:02:44 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Thu, 28 Sep 2023 13:28:55 &#43;0800"
                    class="no-wrap">
                    Thu, 28 Sep 2023 13:28:55 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      407 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="参考链接">参考链接：</h1>
<p>喵云崽库<br>
<a href="https://gitee.com/yoimiya-kokomi/Miao-Yunzai">https://gitee.com/yoimiya-kokomi/Miao-Yunzai</a><br>
<a href="https://github.com/yoimiya-kokomi/Miao-Yunzai">https://github.com/yoimiya-kokomi/Miao-Yunzai</a></p>
<p>参考文章<br>
<a href="https://muerg.cn/post/yunzai_docker/">https://muerg.cn/post/yunzai_docker/</a><br>
<a href="https://zhu-yirui.gitee.io/zyr_blog/2023/06/16/docker%E8%BF%90%E8%A1%8C%E4%BA%91%E5%B4%BD/">https://zhu-yirui.gitee.io/zyr_blog/2023/06/16/docker%E8%BF%90%E8%A1%8C%E4%BA%91%E5%B4%BD/</a></p>
<h1 id="安装依赖">安装依赖</h1>
<p>wrt安装以下几个工具<br>
git-http<br>
docker-compose<br>
node-npm</p>
<h1 id="指令">指令</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 使用 Github </span>
</span></span><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/yoimiya-kokomi/Miao-Yunzai.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> Miao-Yunzai 
</span></span><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用Gitee</span>
</span></span><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://gitee.com/yoimiya-kokomi/Miao-Yunzai.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> Miao-Yunzai 
</span></span><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://gitee.com/yoimiya-kokomi/miao-plugin.git ./plugins/miao-plugin/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用npmjs.org安装</span>
</span></span><span class="line"><span class="cl">npm install pnpm -g
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 指定国内源npmmirror.com安装</span>
</span></span><span class="line"><span class="cl">npm --registry<span class="o">=</span>https://registry.npmmirror.com install pnpm -g
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 直接安装</span>
</span></span><span class="line"><span class="cl">pnpm install -P
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 如依赖安装缓慢或失败，可尝试更换国内npm源后再执行install命令</span>
</span></span><span class="line"><span class="cl">pnpm config <span class="nb">set</span> registry https://registry.npmmirror.com
</span></span><span class="line"><span class="cl">pnpm install -P
</span></span></code></pre></div><h1 id="运维指令">运维指令</h1>
<h3 id="启动容器">启动容器</h3>
<p>在工作目录内运行命令，拉起容器，并运行初始化命令。</p>
<blockquote>
<p>docker-compose up -d<br>
docker exec -it miao-yunzai node app</p>
</blockquote>
<p>完成验证，重启容器</p>
<h3 id="重新登录qq">重新登录QQ</h3>
<blockquote>
<p>docker exec -it miao-yunzai npm run login</p>
</blockquote>
<h3 id="验证完成后按快捷键-ctrlc-退出然后重启容器">验证完成后，按快捷键 Ctrl+C 退出，然后重启容器</h3>
<blockquote>
<p>docker-compose restart</p>
</blockquote>
<h3 id="常用命令">常用命令</h3>
<pre><code>后台运行
</code></pre>
<blockquote>
<p>docker-compose up -d</p>
</blockquote>
<h3 id="前台运行">前台运行</h3>
<blockquote>
<p>docker-compose up</p>
</blockquote>
<h3 id="容器id查看注意是数字和英文的组合">容器ID查看(注意是数字和英文的组合)</h3>
<blockquote>
<p>docker ps -a</p>
</blockquote>
<h3 id="启动完成后进入-miao-yunzai-的容器如果进不去就把miao-yunzai替换成你的容器id">启动完成后进入 miao-yunzai 的容器(如果进不去就把miao-yunzai替换成你的容器ID)</h3>
<blockquote>
<p>docker exec -it miao-yunzai /bin/sh</p>
</blockquote>
<h3 id="停止运行">停止运行</h3>
<blockquote>
<p>docker-compose down</p>
</blockquote>
<h3 id="重启更新">重启/更新</h3>
<p>重启时会自动拉取最新项目并更新相关依赖</p>
<blockquote>
<p>docker-compose restart</p>
</blockquote>
<h3 id="查看日志">查看日志</h3>
<p>查看最后的 100 行日志并持续输出日志</p>
<blockquote>
<p>docker-compose logs -f &ndash;tail=100</p>
</blockquote>
<h1 id="出问题的时候可以参考的文档">出问题的时候可以参考的文档</h1>
<p><a href="https://www.wolai.com/oA43vuW71aBnv7UsEysn4T">https://www.wolai.com/oA43vuW71aBnv7UsEysn4T</a></p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://stc214.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://stc214.github.io/css/toc.css' />

<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://stc214.github.io/css/gitalk.css'>
<script src='https://stc214.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Your client ID',
    clientSecret: 'Your client secret',
    repo: 'stc214.github.io',
    owner: 'STC214',
    admin: ['STC214'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://stc214.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://stc214.github.io/js/github-style.js"></script>




</html>